{# page du produit détaillé #}
{% extends 'base.html.twig' %}

{% block title %}
    {{ad.title}}
{% endblock %}

{% block body %}
 <div class="rounded mx-auto d-block mt-4 col-lg-9">
    <img class="card-img-top img-fluid" src="{{ ad.coverImage }}" alt="{{ ad.title }}">
</div>
<div class="ad-title" style="background-image: url ({{ ad.coverImage }})">
    <div class="container">
        <h1>{{ad.title}}</h1>
        <p>{{ad.introduction}}</p>
        <p class="h2">
            Pour <strong>{{ad.price}}&euro;
            </strong>
        </p>
        <a href="{# chemin du produit #}{{ path('cart_add', {'id': ad.id}) }}" class="btn btn-primary">Ajouter au panier !</a>

        {% if app.user and app.user == ad.author %}
            <a href="{{ path('ads_edit', {'slug': ad.slug}) }}" class="btn btn-secondary">Modifier l'article</a>

            <a href="{{ path('ads_delete', {'slug': ad.slug})}}" class="btn btn-danger" onclick="returnconfirm(`Êtes vous sur de vouloir supprimer l'annonce : {{ad.title}} ?`)">Supprimer l'annonce</a>
        {% endif %}
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-8 mb-3">
            <!-- description de l'article -->
            {{ ad.content | raw }}
        </div>
        {# affichage de l'auteur de l'annonce (feature v.2)
        <div class="col">
            {% set a = ad.author %}
            <div class="row mb-3 align-items-center">
                <div class="col-3">
                    <a href="{{ path('user_show',{'slug': a.slug}) }}">
                        <img src="{{a.picture}}" class="avatar avatar-medium" alt="Avatar de {{a.fullName}}">
                    </a>
                </div>
                <div class="col">
                    <a href="{{ path('user_show',{'slug': a.slug}) }}">
                        <h3>{{a.fullName}}</h3>
                    </a>
                    <span class="badge badge-primary">{{a.ads | length}} annonces</span>
                </div>
            </div>
            {{ a.description | raw}}
        </div> #}
    </div>
</div>

<div class="container mb-5 mt-5"></div>
<div class="container mb-5 mt-5"></div>

{% endblock %}